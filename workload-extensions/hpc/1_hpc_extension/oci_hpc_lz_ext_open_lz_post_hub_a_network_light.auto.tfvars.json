{
  "network_configuration": {
    "default_compartment_id"          : "CMP-LZP-NETWORK-KEY",
    "default_enable_cis_checks"       : false,

    "network_configuration_categories": {
      "shared": {
        "category_compartment_key" : "CMP-LZP-NETWORK-KEY",

        "vcns"                     : {
          "VCN-FRA-LZP-HUB-KEY": {
            "display_name"                    : "vcn-fra-lzp-hub",
            "block_nat_traffic"               : false,
            "dns_label"                       : "vcnfralzphub",
            "is_attach_drg"                   : false,
            "is_create_igw"                   : false,
            "is_ipv6enabled"                  : false,
            "is_oracle_gua_allocation_enabled": false,

            "cidr_blocks"                     : [
              "10.0.0.0/21"
            ],

            "default_security_list"           : {
              "egress_rules" : [],

              "ingress_rules": [
                {
                  "description": "ICMP type 3 code 4",
                  "protocol"   : "ICMP",
                  "icmp_code"  : 4,
                  "icmp_type"  : 3,
                  "src"        : "0.0.0.0/0",
                  "src_type"   : "CIDR_BLOCK",
                  "stateless"  : false
                }
              ]
            },

            "network_security_groups"         : {
              "NSG-FRA-LZP-HUB-FW-DMZ-KEY"    : {
                "display_name" : "nsg-fra-lzp-hub-fw-dmz",

                "egress_rules" : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over ALL protocols",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  }
                },

                "ingress_rules": {
                  "all_tcp"           : {
                    "description": "ingress from anywhere to any TCP port (response from IGW)",
                    "protocol"   : "TCP",
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  },

                  "icmp_dont_fragment": {
                    "description": "ICMP type 3 code 4",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 4,
                    "icmp_type"  : 3,
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  },

                  "icmp_echo"         : {
                    "description": "ICMP type 8 (Echo)",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 0,
                    "icmp_type"  : 8,
                    "src"        : "10.0.0.0/21",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  }
                }
              },

              "NSG-FRA-LZP-HUB-FW-INT-KEY"    : {
                "display_name" : "nsg-fra-lzp-hub-fw-int",

                "egress_rules" : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over ALL protocols",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  }
                },

                "ingress_rules": {
                  "all_tcp"           : {
                    "description": "ingress from anywhere to any TCP port (response from NAT)",
                    "protocol"   : "TCP",
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  },

                  "icmp_dont_fragment": {
                    "description": "ICMP type 3 code 4",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 4,
                    "icmp_type"  : 3,
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  },

                  "icmp_echo"         : {
                    "description": "ICMP type 8 (Echo)",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 0,
                    "icmp_type"  : 8,
                    "src"        : "10.0.0.0/21",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : true
                  }
                }
              },

              "NSG-FRA-LZP-HUB-JUMPSERVER-KEY": {
                "display_name" : "nsg-fra-lzp-hub-jumpserver",

                "egress_rules" : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over TCP",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                },

                "ingress_rules": {
                  "ssh_22": {
                    "description": "ingress from 0.0.0.0/0 over SSH",
                    "protocol"   : "ALL",
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                }
              },

              "NSG-FRA-LZP-HUB-LB-KEY"        : {
                "display_name" : "nsg-fra-lzp-hub-lb",

                "egress_rules" : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over TCP",
                    "protocol"   : "TCP",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                },

                "ingress_rules": {
                  "http_443": {
                    "description" : "ingress from 0.0.0.0/0 over HTTPS 443",
                    "protocol"    : "TCP",
                    "dst_port_max": 443,
                    "dst_port_min": 443,
                    "src"         : "0.0.0.0/0",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  },

                  "http_80" : {
                    "description" : "ingress from 0.0.0.0/0 over HTTP 80",
                    "protocol"    : "TCP",
                    "dst_port_max": 80,
                    "dst_port_min": 80,
                    "src"         : "0.0.0.0/0",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  }
                }
              }
            },

            "route_tables"                    : {
              "RT-00-FRA-LZP-HUB-VCN-INGRESS-KEY": {
                "display_name": "rt-fra-lzp-hub-ingress",

                "route_rules" : {
                  "rt-internet"      : {
                    "description"      : "Route to the Internet through the Internal Firewall",
                    "destination"      : "0.0.0.0/0",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-p-hpc" : {
                    "description"      : "Route to VCN HPC Prod through Internal Firewall",
                    "destination"      : "10.0.112.0/21",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-pp-hpc": {
                    "description"      : "Route to VCN HPC Preprod through Internal Firewall",
                    "destination"      : "10.0.176.0/21",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  }
                }
              },

              "RT-01-FRA-LZP-HUB-VCN-LB-KEY"     : {
                "display_name": "rt-fra-lzp-hub-lb",

                "route_rules" : {
                  "rt-internet"      : {
                    "description"      : "Route to the Internet through the DMZ Firewall",
                    "destination"      : "0.0.0.0/0",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "DMZ FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-p-hpc" : {
                    "description"       : "Route to VCN HPC Prod through DRG",
                    "destination"       : "10.0.112.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-pp-hpc": {
                    "description"       : "Route to VCN HPC Preprod through DRG",
                    "destination"       : "10.0.176.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  }
                }
              },

              "RT-02-FRA-LZP-HUB-VCN-FWDMZ-KEY"  : {
                "display_name": "rt-fra-lzp-hub-dmz",

                "route_rules" : {
                  "rt-igw": {
                    "description"       : "Route to Internet through DMZ FW",
                    "destination"       : "0.0.0.0/0",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "IGW-FRA-LZP-HUB-KEY"
                  }
                }
              },

              "RT-03-FRA-LZP-HUB-VCN-FWINT-KEY"  : {
                "display_name": "rt-fra-lzp-hub-internal",

                "route_rules" : {
                  "rt-natgw"         : {
                    "description"       : "Route to Internet through Private FW",
                    "destination"       : "0.0.0.0/0",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "NGW-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-p-hpc" : {
                    "description"       : "Route to VCN HPC Prod through DRG",
                    "destination"       : "10.0.112.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-pp-hpc": {
                    "description"       : "Route to VCN HPC Preprod through DRG",
                    "destination"       : "10.0.176.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  }
                }
              },

              "RT-04-FRA-LZP-HUB-VCN-NATGW-KEY"  : {
                "display_name": "rt-fra-lzp-hub-natgw",

                "route_rules" : {
                  "rt-vcn-fra-hub-dns-sn" : {
                    "description"      : "Route to dns subnet in Hub VCN through Internal Firewall",
                    "destination"      : "10.0.5.0/24",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-hub-logs-sn": {
                    "description"      : "Route to logs subnet in Hub VCN through Internal Firewall",
                    "destination"      : "10.0.4.0/24",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-hub-mgmt-sn": {
                    "description"      : "Route to mgmt subnet in Hub VCN through Internal Firewall",
                    "destination"      : "10.0.3.0/24",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-p-hpc"      : {
                    "description"      : "Route to VCN HPC Prod  through Internal Firewall",
                    "destination"      : "10.0.112.0/21",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-vcn-fra-pp-hpc"     : {
                    "description"      : "Route to VCN HPC Preprod through Internal Firewall",
                    "destination"      : "10.0.176.0/21",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  }
                }
              },

              "RT-05-FRA-LZP-HUB-VCN-IGW-KEY"    : {
                "display_name": "rt-fra-lzp-hub-igw",

                "route_rules" : {
                  "rt-vcn-fra-hub-lb-sn": {
                    "description"      : "Route to lb subnet in Hub VCN through DMZ Firewall",
                    "destination"      : "10.0.1.0/24",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "DMZ FW PRIVATE IP OCID"
                  }
                }
              },

              "RT-06-LZP-HUB-VCN-MGMT-KEY"       : {
                "display_name": "rt-fra-lzp-hub-mgmt",

                "route_rules" : {
                  "rt-internet"      : {
                    "description"      : "Route to the Internet through the Internal Firewall",
                    "destination"      : "0.0.0.0/0",
                    "destination_type" : "CIDR_BLOCK",
                    "network_entity_id": "INT FW PRIVATE IP OCID"
                  },

                  "rt-sgw"           : {
                    "description"       : "Route for sgw",
                    "destination"       : "all-services",
                    "destination_type"  : "SERVICE_CIDR_BLOCK",
                    "network_entity_key": "SGW-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-p-hpc" : {
                    "description"       : "Route to VCN HPC Prod through DRG",
                    "destination"       : "10.0.112.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-pp-hpc": {
                    "description"       : "Route to VCN HPC Preprod through DRG",
                    "destination"       : "10.0.176.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  }
                }
              }
            },

            "security_lists"                  : {
              "SL-FRA-LZP-HUB-MGMT-KEY": {
                "display_name" : "sl-fra-lzp-hub-mgmt",

                "egress_rules" : [
                  {
                    "description": "egress to 0.0.0.0/0 over ALL protocols",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                ],

                "ingress_rules": [
                  {
                    "description": "ICMP type 3 code 4",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 4,
                    "icmp_type"  : 3,
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  },
                  {
                    "description": "ICMP type 8 (Echo)",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 0,
                    "icmp_type"  : 8,
                    "src"        : "10.0.0.0/21",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  },
                  {
                    "description" : "ingress from the Bastion Managed Service private endpoint IP address",
                    "protocol"    : "TCP",
                    "dst_port_max": 22,
                    "dst_port_min": 22,
                    "src"         : "10.0.3.132/32",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  }
                ]
              }
            },

            "subnets"                         : {
              "SN-FRA-LZP-HUB-DNS"       : {
                "display_name"              : "sn-fra-lzp-hub-dns",
                "cidr_block"                : "10.0.5.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubdns",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-06-LZP-HUB-VCN-MGMT-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-FW-DMZ-KEY": {
                "display_name"              : "sn-fra-lzp-hub-fw-dmz",
                "cidr_block"                : "10.0.0.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubfwdmz",
                "prohibit_internet_ingress" : false,
                "prohibit_public_ip_on_vnic": false,
                "route_table_key"           : "RT-02-FRA-LZP-HUB-VCN-FWDMZ-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-FW-INT-KEY": {
                "display_name"              : "sn-fra-lzp-hub-fw-int",
                "cidr_block"                : "10.0.2.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubfwint",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-03-FRA-LZP-HUB-VCN-FWINT-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-LB-KEY"    : {
                "display_name"              : "sn-fra-lzp-hub-lb",
                "availability_domain"       : null,
                "cidr_block"                : "10.0.1.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahublb",
                "prohibit_internet_ingress" : false,
                "prohibit_public_ip_on_vnic": false,
                "route_table_key"           : "RT-01-FRA-LZP-HUB-VCN-LB-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-LOGS-KEY"  : {
                "display_name"              : "sn-fra-lzp-hub-logs",
                "cidr_block"                : "10.0.4.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahublogs",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-06-LZP-HUB-VCN-MGMT-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-MGMT-KEY"  : {
                "display_name"              : "sn-fra-lzp-hub-mgmt",
                "cidr_block"                : "10.0.3.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubmgmt",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-06-LZP-HUB-VCN-MGMT-KEY",

                "security_list_keys"        : [
                  "SL-FRA-LZP-HUB-MGMT-KEY"
                ]
              }
            },

            "vcn_specific_gateways"           : {
              "internet_gateways": {
                "IGW-FRA-LZP-HUB-KEY": {
                  "display_name"   : "igw-fra-lzp-hub",
                  "route_table_key": "RT-05-FRA-LZP-HUB-VCN-IGW-KEY"
                }
              },

              "nat_gateways"     : {
                "NGW-FRA-LZP-HUB-KEY": {
                  "display_name"   : "ngw-fra-lzp-hub",
                  "route_table_key": "RT-04-FRA-LZP-HUB-VCN-NATGW-KEY"
                }
              },

              "service_gateways" : {
                "SGW-FRA-LZP-HUB-KEY": {
                  "display_name": "sgw-fra-lzp-hub",
                  "services"    : "all-services"
                }
              }
            }
          }
        },

        "non_vcn_specific_gateways": {
          "dynamic_routing_gateways": {
            "DRG-FRA-LZP-HUB-KEY": {
              "display_name"           : "drg-fra-hub",

              "drg_attachments"        : {
                "DRGATT-FRA-LZP-HPC-PREPROD-VCN-KEY": {
                  "display_name"       : "drgatt-fra-lzp-pp-hpc-vcn",
                  "drg_route_table_key": "DRGRT-FRA-LZP-SPOKES-KEY",

                  "network_details"    : {
                    "type"                : "VCN",
                    "attached_resource_id": "OCID VCN HPC PREPROD"
                  }
                },

                "DRGATT-FRA-LZP-HPC-PROD-VCN-KEY"   : {
                  "display_name"       : "drgatt-fra-lzp-p-hpc-vcn",
                  "drg_route_table_key": "DRGRT-FRA-LZP-SPOKES-KEY",

                  "network_details"    : {
                    "type"                : "VCN",
                    "attached_resource_id": "OCID VCN HPC PROD"
                  }
                },

                "DRGATT-FRA-LZP-HUB-VCN-KEY"        : {
                  "display_name"       : "drgatt-fra-lzp-hub-vcn",
                  "drg_route_table_key": "DRGRT-FRA-LZP-HUB-KEY",

                  "network_details"    : {
                    "type"                 : "VCN",
                    "attached_resource_key": "VCN-FRA-LZP-HUB-KEY",
                    "route_table_key"      : "RT-00-FRA-LZP-HUB-VCN-INGRESS-KEY"
                  }
                }
              },

              "drg_route_distributions": {
                "IRTD-FRA-LZP-HUB-KEY": {
                  "display_name"     : "irtd-fra-lzp-hub",
                  "distribution_type": "IMPORT",

                  "statements"       : {
                    "ROUTE-TO-VCN-NONPROD-KEY": {
                      "action"        : "ACCEPT",
                      "priority"      : 20,

                      "match_criteria": {
                        "attachment_type"   : "VCN",
                        "drg_attachment_key": "DRGATT-FRA-LZP-HPC-PREPROD-VCN-KEY",
                        "match_type"        : "DRG_ATTACHMENT_ID"
                      }
                    },

                    "ROUTE-TO-VCN-PROD-KEY"   : {
                      "action"        : "ACCEPT",
                      "priority"      : 10,

                      "match_criteria": {
                        "attachment_type"   : "VCN",
                        "drg_attachment_key": "DRGATT-FRA-LZP-HPC-PROD-VCN-KEY",
                        "match_type"        : "DRG_ATTACHMENT_ID"
                      }
                    }
                  }
                }
              },

              "drg_route_tables"       : {
                "DRGRT-FRA-LZP-HUB-KEY"   : {
                  "display_name"                     : "drgrt-fra-lzp-hub",
                  "import_drg_route_distribution_key": "IRTD-FRA-LZP-HUB-KEY",
                  "is_ecmp_enabled"                  : false,
                  "route_rules"                      : {}
                },

                "DRGRT-FRA-LZP-SPOKES-KEY": {
                  "display_name"   : "drgrt-fra-lzp-spokes",
                  "is_ecmp_enabled": false,

                  "route_rules"    : {
                    "DRGRT-FRA-LZP-SPOKES-STATIC-ROUTE": {
                      "destination"                : "0.0.0.0/0",
                      "destination_type"           : "CIDR_BLOCK",
                      "next_hop_drg_attachment_key": "DRGATT-FRA-LZP-HUB-VCN-KEY"
                    }
                  }
                }
              }
            }
          },

          "l7_load_balancers"       : {
            "LB-FRA-LZP-HUB-01-KEY": {
              "display_name"               : "lb-fra-lzp-hub-01",
              "ip_mode"                    : "IPV4",
              "is_private"                 : false,
              "shape"                      : "flexible",

              "backend_sets"               : {
                "LBBKST-FRA-LZP-HUB-00-KEY": {
                  "name"          : "lbbkst-fra-lzp-hub-01-00",
                  "policy"        : "LEAST_CONNECTIONS",

                  "health_checker": {
                    "protocol"           : "HTTP",
                    "port"               : 80,
                    "interval_ms"        : 10000,
                    "is_force_plain_text": true,
                    "retries"            : 3,
                    "return_code"        : 200,
                    "timeout_in_millis"  : 3000,
                    "url_path"           : "/"
                  }
                }
              },

              "listeners"                  : {
                "LBLSNR-FRA-LZP-HUB-011-80-KEY": {
                  "name"                    : "lblsnr-fra-lzp-hub-01-80",
                  "protocol"                : "HTTP",
                  "port"                    : "80",
                  "default_backend_set_key" : "LBBKST-FRA-LZP-HUB-00-KEY",

                  "connection_configuration": {
                    "idle_timeout_in_seconds": 1200
                  }
                }
              },

              "network_security_group_keys": [
                "NSG-FRA-LZP-HUB-LB-KEY"
              ],

              "shape_details"              : {
                "maximum_bandwidth_in_mbps": 10,
                "minimum_bandwidth_in_mbps": 10
              },
              "subnet_ids"                 : [],

              "subnet_keys"                : [
                "SN-FRA-LZP-HUB-LB-KEY"
              ]
            }
          }
        }
      }
    }
  }
}
