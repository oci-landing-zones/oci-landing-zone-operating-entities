{
    "compartments_configuration": {
        "enable_delete": "true",
        "default_parent_id": "CMP-LANDINGZONE-P-KEY",
        "compartments": {
            "CMP-LZP-P-PLATFORM-HPC-KEY": {
                "name": "cmp-lzp-p-platform-hpc",
                "description": "HPC compartment for all resources related to HPC Prod",
                "parent_id": "CMP-LZP-P-PLATFORM-KEY",
                "defined_tags": null,
                "freeform_tags": null
            },
            "CMP-LZP-PP-PLATFORM-HPC-KEY": {
                "name": "cmp-lzp-pp-platform-hpc",
                "description": "HPC compartment for all resources related to HPC PreProd",
                "parent_id": "CMP-LZP-PP-PLATFORM-KEY",
                "defined_tags": null,
                "freeform_tags": null
            }
        }
    },
    "groups_configuration": {
        "default_defined_tags": null,
        "default_freeform_tags": null,
        "groups": {
            "GRP-LZP-P-PLATFORM-HPC-ADMINS": {
                "name": "grp-lzp-p-platform-hpc-admins",
                "description": "Group responsible for administrating HPC Prod cluster"
            },
            "GRP-LZP-PP-PLATFORM-HPC-ADMINS": {
                "name": "grp-lzp-pp-platform-hpc-admins",
                "description": "Group responsible for administrating HPC PreProd cluster"
            },
            "GRP-LZP-P-PLATFORM-LUSTRE-ADMINS": {
                "name": "grp-lzp-p-platform-lustre-admins",
                "description": "Group responsible for administrating Lustre Prod"
            },
            "GRP-LZP-PP-PLATFORM-LUSTRE-ADMINS": {
                "name": "grp-lzp-pp-platform-lustre-admins",
                "description": "Group responsible for administrating Lustre PreProd"
            }
        }
    },
    "dynamic_groups_configuration": {
        "dynamic_groups": {
            "DG-LZP-P-PLATFORM-HPC": {
                "name": "dg-lzp-p-platform-hpc",
                "description": "dynamic group authenticated all instance in HPC Prod cluster with OCI through InstancePrincipal.",
                "matching_rule": "ALL {instance.compartment.id = '<cmp-lzp-p-platform-hpc OCID>'}"
            },
            "DG-LZP-PP-PLATFORM-HPC": {
                "name": "dg-lzp-pp-platform-hpc",
                "description": "dynamic group authenticated all instance in HPC PreProd cluster with OCI through InstancePrincipal.",
                "matching_rule": "ALL {instance.compartment.id = '<cmp-lzp-pp-platform-hpc OCID>'}"
            }
        }
    },
    "policies_configuration": {
        "enable_cis_benchmark_checks": "false",
        "supplied_policies": {
            "PCY-LZP-P-PLATFORM-HPC-AUTOSCALE": {
                "name": "pcy-lzp-p-platform-hpc-autoscale",
                "description": "policy for dg-lzp-p-platform-hpc",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "Allow dynamic-group dg-lzp-p-platform-hpc to read app-catalog-listing in tenancy",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to use tag-namespace in tenancy",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to manage compute-management-family in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to manage instance-family in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to use virtual-network-family in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to use volumes in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to manage dns in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to manage dns-records in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to use virtual-network-family in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-network",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to use volumes in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-network",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to manage dns in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-network",
                    "Allow dynamic-group dg-lzp-p-platform-hpc to manage dns-records in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-network"
                ]
            },
            "PCY-LZP-P-PLATFORM-HPC-ADMINS": {
                "name": "pcy-lzp-p-platform-hpc-admins",
                "description": "policy for grp-lzp-p-platform-hpc-admins",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "Allow group grp-lzp-p-platform-hpc-admins to manage all-resources in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-platform:cmp-lzp-p-platform-hpc"
                ]
            },
            "PCY-LZP-P-LUSTRE-NETWORK": {
                "name": "pcy-lzp-p-lustre-network",
                "description": "policy for lustre network",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "Allow service lustrefs to use virtual-network-family in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-network"
                ]
            },
            "PCY-LZP-P-LUSTRE-VAULT": {
                "name": "pcy-lzp-p-lustre-vault",
                "description": "policy for grp-lzp-p-platform-lustre-admins",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "allow service blockstorage to use keys in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-security where target.key.id='<KEY-OCID>'",
                    "allow service lustrefs to use key-delegate in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-security where target.key.id='<KEY-OCID>'",
                    "allow service lustrefs to read keys in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-security where target.key.id='<KEY-OCID>'",
                    "allow group grp-lzp-p-platform-lustre-admins to use key-delegate in compartment cmp-landingzone-p:cmp-lzp-prod:cmp-lzp-p-security where target.key.id='<KEY-OCID>'"
                ]
            },
            "PCY-LZP-PP-PLATFORM-HPC-AUTOSCALE": {
                "name": "pcy-lzp-pp-platform-hpc-autoscale",
                "description": "policy for dg-lzp-pp-platform-hpc",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to read app-catalog-listing in tenancy",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to use tag-namespace in tenancy",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to manage compute-management-family in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to manage instance-family in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to use virtual-network-family in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to use volumes in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to manage dns in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to manage dns-records in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to use virtual-network-family in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-network",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to use volumes in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-network",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to manage dns in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-network",
                    "Allow dynamic-group dg-lzp-pp-platform-hpc to manage dns-records in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-network"
                ]
            },
            "PCY-LZP-PP-PLATFORM-HPC-ADMINS": {
                "name": "pcy-lzp-pp-platform-hpc-admins",
                "description": "policy for grp-lzp-pp-platform-hpc-admins",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "Allow group grp-lzp-pp-platform-hpc-admins to manage all-resources in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-platform:cmp-lzp-pp-platform-hpc"
                ]
            },
            "PCY-LZP-PP-LUSTRE-NETWORK": {
                "name": "pcy-lzp-pp-lustre-network",
                "description": "policy for lustre network",
                "compartment_id": "TENANCY-ROOT",
                "statements": [
                    "Allow service lustrefs to use virtual-network-family in compartment cmp-landingzone-p:cmp-lzp-preprod:cmp-lzp-pp-network"
                ]
            }
        }
    }
}