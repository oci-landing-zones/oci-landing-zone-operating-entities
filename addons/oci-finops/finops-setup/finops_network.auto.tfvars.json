{
  "network_configuration": {
    "default_compartment_id"          : "CMP-LZP-NETWORK-KEY",
    "default_enable_cis_checks"       : false,

    "network_configuration_categories": {
      "finops": {
        "category_compartment_id": "CMP-LZP-NETWORK-KEY",

        "vcns"                   : {
          "VCN-FRA-LZP-P-FINOPS-KEY": {
            "display_name"                    : "vcn-fra-lzp-finops",
            "block_nat_traffic"               : false,
            "dns_label"                       : "vcnfralzpfops",
            "is_attach_drg"                   : false,
            "is_create_igw"                   : false,
            "is_ipv6enabled"                  : false,
            "is_oracle_gua_allocation_enabled": false,

            "cidr_blocks"                     : [
              "10.0.24.0/27"
            ],

            "default_security_list"           : {
              "egress_rules" : [],

              "ingress_rules": [
                {
                  "description": "ICMP type 3 code 4",
                  "protocol"   : "ICMP",
                  "icmp_code"  : 4,
                  "icmp_type"  : 3,
                  "src"        : "0.0.0.0/0",
                  "src_type"   : "CIDR_BLOCK",
                  "stateless"  : false
                },
                {
                  "description": "ICMP type 8 (Echo)",
                  "protocol"   : "ICMP",
                  "icmp_code"  : 0,
                  "icmp_type"  : 8,
                  "src"        : "10.0.0.0/21",
                  "src_type"   : "CIDR_BLOCK",
                  "stateless"  : false
                }
              ]
            },

            "network_security_groups"         : {
              "NSG-LZP-P-PROJECTS-DB1-KEY": {
                "display_name"  : "nsg-lzp-finops-db1",
                "compartment_id": "CMP-LZP-PLATFORM-FINOPS-KEY",

                "egress_rules"  : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over TCP",
                    "protocol"   : "TCP",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                },

                "ingress_rules" : {
                  "nsg_app1_1521": {
                    "description" : "ingress over TCP 1521-1522",
                    "protocol"    : "TCP",
                    "dst_port_max": 1522,
                    "dst_port_min": 1521,
                    "src"         : "10.0.1.0/24",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  }
                }
              }
            },

            "route_tables"                    : {
              "RT-01-LZP-FINOPS-VCN-GEN-KEY": {
                "display_name": "rt-01-lzp-finops-vcn-gen",

                "route_rules" : {
                  "rt-vcn-fra-hub": {
                    "description"       : "Route to Hub VCN through DRG",
                    "destination"       : "10.0.0.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  },

                  "sgw_route"     : {
                    "description"       : "Route for sgw",
                    "destination"       : "all-services",
                    "destination_type"  : "SERVICE_CIDR_BLOCK",
                    "network_entity_key": "SGW-FRA-LZP-P-PROJECTS-KEY"
                  }
                }
              }
            },

            "security_lists"                  : {
              "SL-LZP-FINOPS-GENERIC-KEY": {
                "display_name" : "sl-lzp-finops-generic",

                "egress_rules" : [
                  {
                    "description": "egress to 0.0.0.0/0 over ALL protocols",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  },
                  {
                    "description": "egress rule for OSN",
                    "protocol"   : "ALL",
                    "dst"        : "all-services",
                    "dst_type"   : "SERVICE_CIDR_BLOCK",
                    "stateless"  : false
                  }
                ],

                "ingress_rules": [
                  {
                    "description" : "ingress from 10.0.1.0/24 over TCP22",
                    "protocol"    : "TCP",
                    "dst_port_max": 22,
                    "dst_port_min": 22,
                    "src"         : "10.0.1.0/24",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  },
                  {
                    "description": "ICMP type 3 code 4",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 4,
                    "icmp_type"  : 3,
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  },
                  {
                    "description": "ICMP type 8 (Echo)",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 0,
                    "icmp_type"  : 8,
                    "src"        : "10.0.0.0/21",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                ]
              }
            },

            "subnets"                         : {
              "SSN-FRA-LZP-P-APP-KEY": {
                "display_name"              : "sn-fra-finops-app",
                "cidr_block"                : "10.0.24.0/28",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrafopsapp",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-01-LZP-FINOPS-VCN-GEN-KEY",

                "security_list_keys"        : [
                  "SL-LZP-FINOPS-GENERIC-KEY"
                ]
              },

              "SSN-FRA-LZP-P-DB-KEY" : {
                "display_name"              : "sn-fra-finops-db",
                "cidr_block"                : "10.0.24.16/28",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrafopsdb",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-01-LZP-FINOPS-VCN-GEN-KEY",

                "security_list_keys"        : [
                  "SL-LZP-FINOPS-GENERIC-KEY"
                ]
              }
            },

            "vcn_specific_gateways"           : {
              "service_gateways": {
                "SGW-FRA-LZP-P-PROJECTS-KEY": {
                  "display_name": "sgw-fra-lzp-p-projects",
                  "services"    : "all-services"
                }
              }
            }
          }
        }
      },

      "shared": {
        "category_compartment_key" : "CMP-LZP-NETWORK-KEY",

        "vcns"                     : {
          "VCN-FRA-LZP-HUB-KEY": {
            "display_name"                    : "vcn-fra-lzp-hub",
            "block_nat_traffic"               : false,
            "dns_label"                       : "vcnfralzphub",
            "is_attach_drg"                   : false,
            "is_create_igw"                   : false,
            "is_ipv6enabled"                  : false,
            "is_oracle_gua_allocation_enabled": false,

            "cidr_blocks"                     : [
              "10.0.0.0/21"
            ],

            "default_security_list"           : {
              "egress_rules" : [],

              "ingress_rules": [
                {
                  "description": "ICMP type 3 code 4",
                  "protocol"   : "ICMP",
                  "icmp_code"  : 4,
                  "icmp_type"  : 3,
                  "src"        : "0.0.0.0/0",
                  "src_type"   : "CIDR_BLOCK",
                  "stateless"  : false
                }
              ]
            },

            "network_security_groups"         : {
              "NSG-FRA-LZP-HUB-JUMPSERVER-KEY": {
                "display_name" : "nsg-fra-lzp-hub-jumpserver",

                "egress_rules" : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over TCP",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                },

                "ingress_rules": {
                  "ssh_22": {
                    "description": "ingress from MGMT over SSH",
                    "protocol"   : "ALL",
                    "src"        : "10.0.0.0/24",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                }
              },

              "NSG-FRA-LZP-HUB-LB-KEY"        : {
                "display_name" : "nsg-fra-lzp-hub-lb",

                "egress_rules" : {
                  "anywhere": {
                    "description": "egress to 0.0.0.0/0 over TCP",
                    "protocol"   : "TCP",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                },

                "ingress_rules": {
                  "http_443": {
                    "description" : "ingress from 0.0.0.0/0 over HTTPS 443",
                    "protocol"    : "TCP",
                    "dst_port_max": 443,
                    "dst_port_min": 443,
                    "src"         : "0.0.0.0/0",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  },

                  "http_80" : {
                    "description" : "ingress from 0.0.0.0/0 over HTTP 80",
                    "protocol"    : "TCP",
                    "dst_port_max": 80,
                    "dst_port_min": 80,
                    "src"         : "0.0.0.0/0",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  }
                }
              }
            },

            "route_tables"                    : {
              "RT-01-FRA-LZP-HUB-VCN-LB-KEY": {
                "display_name": "rt-fra-lzp-hub-lb",

                "route_rules" : {
                  "rt-internet"           : {
                    "description"       : "Route to the Internet through Internet GW",
                    "destination"       : "0.0.0.0/0",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "IGW-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-p-projects" : {
                    "description"       : "Route to VCN Prod Projects through DRG",
                    "destination"       : "10.0.64.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-pp-projects": {
                    "description"       : "Route to VCN Preprod Projects through DRG",
                    "destination"       : "10.0.128.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  }
                }
              },

              "RT-02-LZP-HUB-VCN-MGMT-KEY"  : {
                "display_name": "rt-fra-lzp-hub-mgmt",

                "route_rules" : {
                  "rt-natgw"              : {
                    "description"       : "Route to Internet through NAT GW",
                    "destination"       : "0.0.0.0/0",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "NGW-FRA-LZP-HUB-KEY"
                  },

                  "rt-sgw"                : {
                    "description"       : "Route for sgw",
                    "destination"       : "all-services",
                    "destination_type"  : "SERVICE_CIDR_BLOCK",
                    "network_entity_key": "SGW-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-p-projects" : {
                    "description"       : "Route to VCN Prod Projects through DRG",
                    "destination"       : "10.0.64.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  },

                  "rt-vcn-fra-pp-projects": {
                    "description"       : "Route to VCN Preprod Projects through DRG",
                    "destination"       : "10.0.128.0/21",
                    "destination_type"  : "CIDR_BLOCK",
                    "network_entity_key": "DRG-FRA-LZP-HUB-KEY"
                  }
                }
              }
            },

            "security_lists"                  : {
              "SL-FRA-LZP-HUB-MGMT-KEY": {
                "display_name" : "sl-fra-lzp-hub-mgmt",

                "egress_rules" : [
                  {
                    "description": "egress to 0.0.0.0/0 over ALL protocols",
                    "protocol"   : "ALL",
                    "dst"        : "0.0.0.0/0",
                    "dst_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  }
                ],

                "ingress_rules": [
                  {
                    "description": "ICMP type 3 code 4",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 4,
                    "icmp_type"  : 3,
                    "src"        : "0.0.0.0/0",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  },
                  {
                    "description": "ICMP type 8 (Echo)",
                    "protocol"   : "ICMP",
                    "icmp_code"  : 0,
                    "icmp_type"  : 8,
                    "src"        : "10.0.0.0/21",
                    "src_type"   : "CIDR_BLOCK",
                    "stateless"  : false
                  },
                  {
                    "description" : "ingress from the Bastion Managed Service private endpoint IP address",
                    "protocol"    : "TCP",
                    "dst_port_max": 22,
                    "dst_port_min": 22,
                    "src"         : "10.0.1.132/32",
                    "src_type"    : "CIDR_BLOCK",
                    "stateless"   : false
                  }
                ]
              }
            },

            "subnets"                         : {
              "SN-FRA-LZP-HUB-DNS"     : {
                "display_name"              : "sn-fra-lzp-hub-dns",
                "cidr_block"                : "10.0.3.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubdns",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-02-LZP-HUB-VCN-MGMT-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-LB-KEY"  : {
                "display_name"              : "sn-fra-lzp-hub-lb",
                "availability_domain"       : null,
                "cidr_block"                : "10.0.0.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahublb",
                "prohibit_internet_ingress" : false,
                "prohibit_public_ip_on_vnic": false,
                "route_table_key"           : "RT-01-FRA-LZP-HUB-VCN-LB-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              },

              "SN-FRA-LZP-HUB-MGMT-KEY": {
                "display_name"              : "sn-fra-lzp-hub-mgmt",
                "cidr_block"                : "10.0.1.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubmgmt",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-02-LZP-HUB-VCN-MGMT-KEY",

                "security_list_keys"        : [
                  "SL-FRA-LZP-HUB-MGMT-KEY"
                ]
              },

              "SN-FRA-LZP-HUB-MON-KEY" : {
                "display_name"              : "sn-fra-lzp-hub-mon",
                "cidr_block"                : "10.0.2.0/24",
                "dhcp_options_key"          : "default_dhcp_options",
                "dns_label"                 : "snfrahubmon",
                "prohibit_internet_ingress" : true,
                "prohibit_public_ip_on_vnic": true,
                "route_table_key"           : "RT-02-LZP-HUB-VCN-MGMT-KEY",

                "security_list_keys"        : [
                  "default_security_list"
                ]
              }
            },

            "vcn_specific_gateways"           : {
              "internet_gateways": {
                "IGW-FRA-LZP-HUB-KEY": {
                  "display_name": "igw-fra-lzp-hub"
                }
              },

              "nat_gateways"     : {
                "NGW-FRA-LZP-HUB-KEY": {
                  "display_name": "ngw-fra-lzp-hub"
                }
              },

              "service_gateways" : {
                "SGW-FRA-LZP-HUB-KEY": {
                  "display_name": "sgw-fra-lzp-hub",
                  "services"    : "all-services"
                }
              }
            }
          }
        },

        "non_vcn_specific_gateways": {
          "dynamic_routing_gateways": {
            "DRG-FRA-LZP-HUB-KEY": {
              "display_name"           : "drg-fra-hub",

              "drg_attachments"        : {
                "DRGATT-FRA-LZP-HUB-VCN-KEY"     : {
                  "display_name"       : "drtatt-fra-lzp-hub-vcn",
                  "drg_route_table_key": "DRGRT-FRA-LZP-HUB-KEY",

                  "network_details"    : {
                    "type"                 : "VCN",
                    "attached_resource_key": "VCN-FRA-LZP-HUB-KEY"
                  }
                },

                "DRGATT-FRA-LZP-P-FINOPS-VCN-KEY": {
                  "display_name"       : "drgatt-fra-lzp-p-projects-vcn",
                  "drg_route_table_key": "DRGRT-FRA-LZP-SPOKES-KEY",

                  "network_details"    : {
                    "type"                 : "VCN",
                    "attached_resource_key": "VCN-FRA-LZP-P-FINOPS-KEY"
                  }
                }
              },

              "drg_route_distributions": {
                "IRTD-FRA-LZP-HUB-KEY"  : {
                  "display_name"     : "irtd-fra-lzp-hub",
                  "distribution_type": "IMPORT",

                  "statements"       : {
                    "ROUTE-TO-VCN-FINOPS-KEY": {
                      "action"        : "ACCEPT",
                      "priority"      : 10,

                      "match_criteria": {
                        "attachment_type"   : "VCN",
                        "drg_attachment_key": "DRGATT-FRA-LZP-P-FINOPS-VCN-KEY",
                        "match_type"        : "DRG_ATTACHMENT_ID"
                      }
                    }
                  }
                },

                "IRTD-FRA-LZP-SPOKE-KEY": {
                  "display_name"     : "irtd-fra-lzp-spoke",
                  "distribution_type": "IMPORT",

                  "statements"       : {
                    "ROUTE-TO-VCN-S-FINOPS-KEY": {
                      "action"        : "ACCEPT",
                      "priority"      : 20,

                      "match_criteria": {
                        "attachment_type"   : "VCN",
                        "drg_attachment_key": "DRGATT-FRA-LZP-P-FINOPS-VCN-KEY",
                        "match_type"        : "DRG_ATTACHMENT_ID"
                      }
                    },

                    "ROUTE-TO-VCN-S-HUB-KEY"   : {
                      "action"        : "ACCEPT",
                      "priority"      : 10,

                      "match_criteria": {
                        "attachment_type"   : "VCN",
                        "drg_attachment_key": "DRGATT-FRA-LZP-HUB-VCN-KEY",
                        "match_type"        : "DRG_ATTACHMENT_ID"
                      }
                    }
                  }
                }
              },

              "drg_route_tables"       : {
                "DRGRT-FRA-LZP-HUB-KEY"   : {
                  "display_name"                     : "drgrt-fra-lzp-hub",
                  "import_drg_route_distribution_key": "IRTD-FRA-LZP-HUB-KEY",
                  "is_ecmp_enabled"                  : false,
                  "route_rules"                      : {}
                },

                "DRGRT-FRA-LZP-SPOKES-KEY": {
                  "display_name"                     : "drgrt-fra-lzp-spokes",
                  "import_drg_route_distribution_key": "IRTD-FRA-LZP-SPOKE-KEY",
                  "is_ecmp_enabled"                  : false,
                  "route_rules"                      : {}
                }
              }
            }
          },

          "l7_load_balancers"       : {
            "LB-FRA-LZP-HUB-01-KEY": {
              "display_name"               : "lb-fra-lzp-hub-01",
              "ip_mode"                    : "IPV4",
              "is_private"                 : false,
              "shape"                      : "flexible",

              "backend_sets"               : {
                "LBBKST-FRA-LZP-HUB-00-KEY"   : {
                  "name"          : "lbbkst-fra-lzp-hub-01-00",
                  "policy"        : "LEAST_CONNECTIONS",

                  "health_checker": {
                    "protocol"           : "HTTP",
                    "port"               : 80,
                    "interval_ms"        : 10000,
                    "is_force_plain_text": true,
                    "retries"            : 3,
                    "return_code"        : 200,
                    "timeout_in_millis"  : 3000,
                    "url_path"           : "/"
                  }
                },

                "LBBKST-FRA-LZP-HUB-01-01-KEY": {
                  "name"          : "lbbkst-fra-lzp-hub-01-01-app1",
                  "policy"        : "LEAST_CONNECTIONS",

                  "backends"      : {
                    "LBBE-FRA-LZP-HUB-01-01-KEY": {
                      "port"      : 80,
                      "ip_address": "10.0.64.10"
                    }
                  },

                  "health_checker": {
                    "protocol"           : "HTTP",
                    "port"               : 80,
                    "interval_ms"        : 10000,
                    "is_force_plain_text": true,
                    "retries"            : 3,
                    "return_code"        : 200,
                    "timeout_in_millis"  : 3000,
                    "url_path"           : "/testapp1/"
                  }
                },

                "LBBKST-FRA-LZP-HUB-01-02-KEY": {
                  "name"          : "lbbkst-fra-lzp-hub-01-02-app2",
                  "policy"        : "LEAST_CONNECTIONS",

                  "backends"      : {
                    "LBBE-FRA-LZP-HUB-01-02-KEY": {
                      "port"      : 80,
                      "ip_address": "10.0.128.10"
                    }
                  },

                  "health_checker": {
                    "protocol"           : "HTTP",
                    "port"               : 80,
                    "interval_ms"        : 10000,
                    "is_force_plain_text": true,
                    "retries"            : 3,
                    "return_code"        : 200,
                    "timeout_in_millis"  : 3000,
                    "url_path"           : "/testapp2/"
                  }
                }
              },

              "listeners"                  : {
                "LBLSNR-FRA-LZP-HUB-011-80-KEY": {
                  "name"                    : "lblsnr-fra-lzp-hub-01-80",
                  "protocol"                : "HTTP",
                  "port"                    : "80",
                  "default_backend_set_key" : "LBBKST-FRA-LZP-HUB-00-KEY",
                  "routing_policy_key"      : "LBRT-FRA-LZP-HUB-01-KEY",

                  "connection_configuration": {
                    "idle_timeout_in_seconds": 1200
                  }
                }
              },

              "network_security_group_keys": [
                "NSG-FRA-LZP-HUB-LB-KEY"
              ],

              "routing_policies"           : {
                "LBRT-FRA-LZP-HUB-01-KEY": {
                  "name"                      : "lbrt-fra-lzp-hub-01",
                  "condition_language_version": "V1",

                  "rules"                     : {
                    "lbrouterule_testapp1": {
                      "name"     : "testapp1",
                      "condition": "all(http.request.url.path sw (i '/testapp1/'))",

                      "actions"  : {
                        "action-1": {
                          "name"           : "FORWARD_TO_BACKENDSET",
                          "backend_set_key": "LBBKST-FRA-LZP-HUB-01-01-KEY"
                        }
                      }
                    },

                    "lbrouterule_testapp2": {
                      "name"     : "testapp2",
                      "condition": "all(http.request.url.path sw (i '/testapp2/'))",

                      "actions"  : {
                        "action-2": {
                          "name"           : "FORWARD_TO_BACKENDSET",
                          "backend_set_key": "LBBKST-FRA-LZP-HUB-01-02-KEY"
                        }
                      }
                    }
                  }
                }
              },

              "shape_details"              : {
                "maximum_bandwidth_in_mbps": 10,
                "minimum_bandwidth_in_mbps": 10
              },
              "subnet_ids"                 : [],

              "subnet_keys"                : [
                "SN-FRA-LZP-HUB-LB-KEY"
              ]
            }
          }
        }
      }
    }
  }
}
